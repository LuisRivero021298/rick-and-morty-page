const fetchData=(urlApi)=>{return new Promise((resolve,reject)=>{let xhttp=new XMLHttpRequest();xhttp.open('GET',urlApi,true);xhttp.onreadystatechange=(()=>{if(xhttp.readyState===4){(xhttp.status===200)?resolve(JSON.parse(xhttp.responseText)):reject(new Error('Error!'));}});xhttp.send();})}; const cardTemplate=(image,origin,name,species,status,id)=>{const card=document.createElement('article');card.classList.add('card');const newId=setId(id,name);card.setAttribute('id',newId);if(status==='unknown')status='No registered';if(origin.name==='unknown')origin.name='No registered';card.innerHTML=`<div class="card__top"><img class="card__image"src="${image}"alt="card-image"></div><div class="card__bottom spaced"><div><h2 class="card__title">${name}</h2><span class="card__label">${origin.name}</span></div><div><span class="card__text">${species}</span><span class="card__label--${status.toLowerCase()}">${status}</span></div></div>`;return card;}; const setId=(id,name)=>{let nameResult=name.split(' ');return`${id}-${nameResult[0]}`;}; const url='https://rickandmortyapi.com/api/character/';const cardGrid=document.getElementById('card-grid');const paginationItems=document.getElementsByClassName('pagination__item');let charateresList=[];const getData=async(page=0)=>{try{page===0?page='':page=`?page=${page}`;const{results}=await fetchData(url+page);charateresList=results;addCharacter();}catch(error){console.error(error);}};getData();const addCharacter=()=>{charateresList.map(character=>{const{image,origin,name,species,status,id}=character;const card=cardTemplate(image,origin,name,species,status,id);cardGrid.appendChild(card);});}; for(let i=0;i<paginationItems.length;i++){paginationItems[i].addEventListener('click',function(){const page=this.attributes[2].value;if(charateresList.length!==0){cardGrid.innerHTML="";charateresList=[];} getData(page);});}